<?php

/* @var $this yii\web\View */


$this->title = 'My Search';
//require '../vendor/autoload.php';


// $m = new MongoClient();
//	
//   echo "Connection to database successfully";
//   // select a database
//   $db = $m->mydb;
//	
//   echo "Database mydb selected";
//   
//   die();
 
$client = \Elasticsearch\ClientBuilder::create()->build();

//$log = \index0h\log\LogstashFileTarget;

//
//$data = '021815: Jun  6 10:59:37.498 IST: %SEC_LOGIN-5-LOGIN_SUCCESS: Login Success [user: rjilautoro] [Source: 10.137.40.140] [localport: 22] at 10:59:37 IST Mon Jun 6 2016
//021816: Jun  6 10:59:37.810 IST: %SYS-6-LOGOUT: User rjilautoro has exited tty session 2(10.137.40.140)
//021817: Jun  6 10:59:41.017 IST: %SEC_LOGIN-5-LOGIN_SUCCESS: Login Success [user: rjilautoro] [Source: 10.137.40.140] [localport: 22] at 10:59:41 IST Mon Jun 6 2016';
//
//$indexParams = json_encode($data);

//$indexParams['index'] = 'books';
//
//// optional if omitted this will be autogenerated
//$indexParams['id'] = 'my_unique_id';
//
//// fields
//$indexParams['body'] = array(
//    'title' => '20.000 miles under the sea',
//    'author' => 'Jules Verne',
//    'description' => 'A longer description of the book',
//    'genre' => 'Adventure'
//);
//
//// type of document
//$indexParams['type'] = 'book';

// add document to the index
$json = '{
        "query":{
            "query_string" : {
                "fields" : ["title", "author", "genre", "description"],
                "query" : "genre:adventure NOT verne"
            }
        }
    }';
$indexParams['body']  = $json;
$results = $client->search($indexParams);
echo '<pre>';
print_r($results);die();



?>
<!--<div class="site-index">

    <div class="jumbotron">
        <h1> 
  <form id="searchbox" action="">
    <input id="search" type="text" placeholder="Type here">
    <input id="submit" type="submit" value="Search">
</form>
</div>
        
        </h1>


    </div>-->


<script type="text/javascript">
//    $(document).ready(function() {           
//    if (!Modernizr.input.placeholder)
//    {       
//        var placeholderText = $('#search').attr('placeholder');
//        
//        $('#search').attr('value',placeholderText);
//        $('#search').addClass('placeholder');
//        
//        $('#search').focus(function() {             
//            if( ($('#search').val() == placeholderText) )
//            {
//                $('#search').attr('value','');
//                $('#search').removeClass('placeholder');
//            }
//        });
//        
//        $('#search').blur(function() {              
//            if ( ($('#search').val() == placeholderText) || (($('#search').val() == '')) )                      
//            {   
//                $('#search').addClass('placeholder');                     
//                $('#search').attr('value',placeholderText);
//            }
//        });
//    }                
//});
    
    </script>

